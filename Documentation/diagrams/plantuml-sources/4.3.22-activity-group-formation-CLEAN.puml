@startuml 4.3.22-activity-group-formation
!theme plain

skinparam backgroundColor #FFFFFF
skinparam activity {
    BackgroundColor #F5F5F5
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
    FontName Arial
}
skinparam ArrowColor #424242

title <b>Group Formation - Activity Diagram</b>\n<size:10>UML 2.5 Activity Diagram</size>

|Student|
start
:Click create group;

|System|

if (Already in group?) then ([yes])
  :Show error;
  stop
endif

:Show form;

|Student|
:Enter name;
:Enter description;

|System|

if (Name taken?) then ([yes])
  :Show error;
  stop
endif

:Create group;
:[Group]\nstatus=FORMING}
:Set as leader;

|Group Leader|

repeat
  :Search student;
  
  |System|
  :Show results;
  
  |Group Leader|
  :Select student;
  
  |System|
  
  if (Eligible?) then ([no])
    :Show reason;
  else ([yes])
    
    fork
      :Send email;
    fork again
      :In-app notify;
    end fork
    
  endif
  
repeat while (Need more?) is ([yes]) and ([<5 members])
->no;

|System|
:Wait responses;

|Invitee|

if (Accept?) then ([yes])
  |System|
  :Add to group;
  :Remove other invites;
  :Notify leader;
else ([no])
  :Decline;
  |System|
  :Notify leader;
endif

|System|

if (3-5 members?) then ([yes])
  :[Group]\nstatus=PENDING}
else ([no])
  :Wait more;
  stop
endif

|Group Leader|
:Submit for approval;

|System|
:Notify lecturer;

|Lecturer|
:Review composition;

fork
  :Check distribution;
fork again
  :Review name;
fork again
  :Check enrollment;
end fork

if (Approve?) then ([yes])
  :Approve;
  
  |System|
  :[Group]\nstatus=ACTIVE}
  
  fork
    :Create chat;
  fork again
    :Create kanban;
  fork again
    :Setup storage;
  fork again
    :Enable video;
  end fork
  
  :Notify members;
  
  |Group Leader|
  :Browse projects;
  :Select project;
  
  |System|
  :[Group]\nproject=selected}
  :Create milestones;
  stop
  
else ([no])
  |Lecturer|
  :Reject with reason;
  
  |System|
  :[Group]\nstatus=FORMING}
  :Notify leader;
  
  |Group Leader|
  :Revise composition;
  :Resubmit;
  stop
endif

legend right
  <b>UML 2.5 Notation</b>
  ──────────────────
  • repeat-while: iteration
  • fork-join: parallel flow
  • [Object]: object node
  • if-then-else: decision
  • and: complex guard
end legend

@enduml

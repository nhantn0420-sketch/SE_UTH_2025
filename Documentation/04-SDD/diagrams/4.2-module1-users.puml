@startuml 4.2-module1-users
!define LIGHTBLUE #E3F2FD

skinparam backgroundColor white
skinparam defaultFontName Arial
skinparam defaultFontSize 11
skinparam linetype ortho
skinparam classAttributeIconSize 0

skinparam class {
  BackgroundColor LIGHTBLUE
  BorderColor #1976D2
  BorderThickness 2
  ArrowColor #333333
  FontStyle bold
}

title Module 1: Users & Authentication

class users <<table>> {
  **<color:gold>ðŸ”‘ PK</color> id : INTEGER**
  --
  <color:green>âš¡ UNIQUE</color> username : VARCHAR(100)
  <color:green>âš¡ UNIQUE</color> email : VARCHAR(255)
  full_name : VARCHAR(255)
  hashed_password : VARCHAR(255)
  role : VARCHAR(20)
  avatar_url : TEXT
  phone : VARCHAR(20)
  is_active : BOOLEAN
  created_at : TIMESTAMP
  updated_at : TIMESTAMP
  last_login : TIMESTAMP
  --
  <b>Enum Values for role:</b>
  â€¢ 'ADMIN'
  â€¢ 'STAFF'
  â€¢ 'HEAD'
  â€¢ 'LECTURER'
  â€¢ 'STUDENT'
}

note right of users
  **Central User Management**
  
  â€¢ Single table for all user types
  â€¢ Role-based access control (RBAC)
  â€¢ Password hashed with bcrypt
  â€¢ Email used for authentication
  
  **Relationships (1:N):**
  â”œâ”€â–º class_members (as student)
  â”œâ”€â–º classes (as lecturer)
  â”œâ”€â–º group_members (as member)
  â”œâ”€â–º projects (as creator)
  â”œâ”€â–º chat_messages (as sender)
  â”œâ”€â–º evaluations (as evaluator)
  â””â”€â–º notifications (as recipient)
end note

legend bottom left
  <b>Table Legend:</b>
  <color:gold>ðŸ”‘</color> Primary Key
  <color:green>âš¡</color> Unique Constraint
  <color:blue>ðŸ”—</color> Foreign Key
  
  <b>Role Hierarchy:</b>
  ADMIN > HEAD > LECTURER > STUDENT
  
  <b>Indexes:</b>
  â€¢ idx_users_username (UNIQUE)
  â€¢ idx_users_email (UNIQUE)
  â€¢ idx_users_role
  â€¢ idx_users_is_active
end legend

@enduml

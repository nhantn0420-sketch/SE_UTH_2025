# 3.3. FUNCTIONAL REQUIREMENTS

**Chi tiết 72 Yêu cầu Chức năng**

---

## 3.3.1. Overview

CollabSphere bao gồm **72 Functional Features** (FE-01 → FE-72) được phân loại theo **8 modules chính**:

| Module | Features | Description |
|--------|----------|-------------|
| **A. Authentication & Account** | FE-01 ~ FE-04 | User registration, login, profile, roles |
| **B. Administrative Functions** | FE-05 ~ FE-07 | Admin dashboard, user management, reports |
| **C. Staff Functions** | FE-08 ~ FE-16 | Import data, manage academic structure |
| **D. Head of Department** | FE-17 ~ FE-21 | Approve projects, oversee classes |
| **E. Lecturer Functions** | FE-22 ~ FE-47 | Project management, team management, evaluation |
| **F. Student Functions** | FE-48 ~ FE-63 | Team collaboration, task management, peer review |
| **G. Real-time Collaboration** | FE-64 ~ FE-69 | Chat, video, whiteboard, collaborative editor |
| **H. Notification System** | FE-70 ~ FE-72 | Email and in-app notifications |

**Total: 72 Features**

---

## 3.3.2. MODULE A: AUTHENTICATION & ACCOUNT MANAGEMENT

### **FE-01: User Registration & Login**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-01 |
| **Name** | User Registration & Login |
| **Priority** | MUST |
| **User Role** | All (Admin, Staff, Head, Lecturer, Student) |

**Description:**  
Hệ thống cho phép người dùng đăng ký tài khoản mới và đăng nhập vào hệ thống sử dụng email và password. Xác thực sử dụng JWT (JSON Web Token).

**Functional Details:**
- **Registration:**
  - Form fields: Email (unique), Password (min 8 chars), Full Name, Role
  - Validation: Email format, password strength, required fields
  - Email verification sent after registration
  - Default status: Inactive until verified
- **Login:**
  - Form fields: Email, Password
  - JWT token generated upon successful login (24-hour expiration)
  - Token refresh mechanism when user active
  - Remember me option (extends token to 7 days)
- **Security:**
  - Password hashing using bcrypt
  - Failed login attempts tracked (max 5, then 15-min lockout)
  - HTTPS only for authentication endpoints

**Inputs:**
- Email address (string, email format)
- Password (string, 8-50 characters)
- Full name (string, 3-100 characters)

**Outputs:**
- JWT access token
- User profile data (id, email, name, role)
- Success/error messages

**Business Rules:**
- BR-01: Email must be unique across system
- BR-02: Password must contain uppercase, lowercase, number, special char
- BR-03: JWT token expires after 24 hours of inactivity

**Related Use Cases:** All use cases require authentication

---

### **FE-02: Role-Based Access Control (RBAC)**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-02 |
| **Name** | Role-Based Access Control |
| **Priority** | MUST |
| **User Role** | All |

**Description:**  
Hệ thống phân quyền truy cập dựa trên 5 vai trò người dùng: Admin, Staff, Head of Department, Lecturer, Student. Mỗi vai trò có tập permissions riêng biệt.

**Functional Details:**
- **5 Roles:**
  1. **Admin**: Full system access, user management, system reports
  2. **Staff**: Manage subjects, curricula, classes, user imports
  3. **Head**: Approve projects, assign projects to classes, oversee teaching
  4. **Lecturer**: Create projects, manage teams, evaluate students
  5. **Student**: Collaborate in teams, submit work, view evaluations

- **Permission Enforcement:**
  - Frontend: Hide/disable UI elements based on role
  - Backend: API endpoints check user role before processing
  - Database: Role stored in User table, checked on every request

- **Permission Examples:**
  - Only Lecturers can create projects
  - Only Head can approve projects
  - Only Team Leader (Student) can mark milestones complete
  - Staff cannot access team workspaces

**Inputs:**
- User ID and role from JWT token

**Outputs:**
- Allowed/Denied access to features
- HTTP 403 Forbidden for unauthorized access

**Business Rules:**
- BR-04: User can have only one primary role
- BR-05: Role cannot be changed by user themselves (only Admin)
- BR-06: Super Admin role reserved for system setup

**Related Use Cases:** All use cases have role restrictions

---

### **FE-03: Profile Management**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-03 |
| **Name** | Profile Management |
| **Priority** | MUST |
| **User Role** | All |

**Description:**  
Người dùng có thể xem và chỉnh sửa thông tin cá nhân, avatar, và thay đổi password.

**Functional Details:**
- **View Profile:**
  - Display: Full name, email, role, avatar, account created date
  - Display: Activity stats (projects, teams, etc. based on role)
- **Edit Profile:**
  - Editable fields: Full name, avatar (upload image), bio
  - Non-editable: Email, role (set by admin)
  - Avatar upload: Max 5MB, formats PNG/JPG
  - Image processing: Resize to 300x300px
- **Change Password:**
  - Requires: Current password verification
  - New password validation (strength requirements)
  - All sessions invalidated after password change

**Inputs:**
- Full name (string, 3-100 chars)
- Avatar image (file, <5MB)
- Current password (for change password)
- New password (8-50 chars)

**Outputs:**
- Updated profile data
- Success/error messages
- New JWT token if password changed

**Business Rules:**
- BR-07: Avatar must be < 5MB
- BR-08: Password change requires current password verification

**Related Use Cases:** N/A (standalone feature)

---

### **FE-04: Account Activation/Deactivation**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-04 |
| **Name** | Account Activation/Deactivation |
| **Priority** | SHOULD |
| **User Role** | Admin |

**Description:**  
Admin có thể kích hoạt hoặc vô hiệu hóa tài khoản người dùng. Tài khoản bị deactivate không thể đăng nhập.

**Functional Details:**
- **Activate Account:**
  - Set user status to "Active"
  - User can log in
  - Notification sent to user email
- **Deactivate Account:**
  - Set user status to "Inactive"
  - User cannot log in (existing sessions terminated)
  - Data preserved (not deleted)
  - Can reactivate later
- **Soft Delete:**
  - Option to "Delete" (set deleted_at timestamp)
  - User data hidden but not permanently removed
  - Can restore within 30 days

**Inputs:**
- User ID to activate/deactivate
- Optional: Reason for deactivation

**Outputs:**
- Updated user status
- Notification sent to affected user

**Business Rules:**
- BR-09: Cannot deactivate own account
- BR-10: Deactivated users' data remains for 30 days before purge option

**Related Use Cases:** UC001 (Admin manages users)

---

## 3.3.3. MODULE B: ADMINISTRATIVE FUNCTIONS

### **FE-05: View All Accounts**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-05 |
| **Name** | View All Accounts |
| **Priority** | MUST |
| **User Role** | Admin |

**Description:**  
Admin có thể xem danh sách tất cả users (Staff, Head, Lecturer, Student) với filtering và search.

**Functional Details:**
- **User List Display:**
  - Table columns: Name, Email, Role, Status, Created Date, Last Login
  - Pagination: 20 users per page
  - Total count displayed
- **Filtering:**
  - By role: All, Admin, Staff, Head, Lecturer, Student
  - By status: All, Active, Inactive, Pending
  - By date range: Created date
- **Search:**
  - Search by: Name, Email
  - Real-time search (debounced)
- **Sorting:**
  - Sort by: Name, Created Date, Last Login
  - Ascending/Descending

**Inputs:**
- Filter criteria (role, status, date range)
- Search query (string)
- Page number, page size

**Outputs:**
- List of users matching criteria
- Total count
- Pagination info

**Business Rules:**
- BR-11: Only Admin can view all users
- BR-12: Passwords never displayed

**Related Use Cases:** N/A (Admin-only)

---

### **FE-06: System Reports**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-06 |
| **Name** | System Reports |
| **Priority** | SHOULD |
| **User Role** | Admin |

**Description:**  
Admin xem báo cáo lỗi và feedback từ users qua email hoặc in-app reporting.

**Functional Details:**
- **Error Logs:**
  - Display: Error message, timestamp, user, endpoint
  - Filter by severity: Critical, Error, Warning, Info
  - Export to CSV
- **User Feedback:**
  - Users can submit feedback via form
  - Admin sees: Feedback text, user, date, status (New/Reviewed/Resolved)
- **Activity Logs:**
  - Track: Login attempts, failed authentications, permission violations
  - Audit trail for security

**Inputs:**
- Date range for reports
- Filter criteria (severity, user, type)

**Outputs:**
- Error log table
- Feedback submissions list
- Exportable CSV files

**Business Rules:**
- BR-13: Logs retained for 90 days
- BR-14: Only Admin can view logs

---

### **FE-07: Dashboard Analytics**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-07 |
| **Name** | Dashboard Analytics |
| **Priority** | SHOULD |
| **User Role** | Admin |

**Description:**  
Admin xem thống kê tổng quan: số users, projects, groups, active sessions.

**Functional Details:**
- **Dashboard Widgets:**
  - Total users (breakdown by role)
  - Total projects (breakdown by status)
  - Total groups/teams
  - Active sessions (online users)
  - Storage usage (GB used / quota)
- **Charts:**
  - User growth over time (line chart)
  - Project submissions per month (bar chart)
  - Active users per day (area chart)

**Inputs:**
- Date range for analytics

**Outputs:**
- Dashboard with metrics and charts

**Business Rules:**
- BR-15: Dashboard data cached for 5 minutes

---

## 3.3.4. MODULE C: STAFF FUNCTIONS

### **FE-08: Import Subjects from File**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-08 |
| **Name** | Import Subjects from File |
| **Priority** | MUST |
| **User Role** | Staff |

**Description:**  
Staff upload CSV/Excel file để tự động tạo nhiều môn học cùng lúc.

**Functional Details:**
- **File Upload:**
  - Supported formats: CSV, XLSX
  - Max file size: 10MB
  - Template provided for download
- **CSV Format:**
  - Columns: `subject_code`, `subject_name`, `description`
  - Example: `SE101`, `Software Engineering Fundamentals`, `Introduction to SE...`
- **Import Process:**
  1. Staff uploads file
  2. System validates format and data
  3. System previews data (first 5 rows)
  4. Staff confirms import
  5. System creates Subject records
  6. System shows success count and errors
- **Validation:**
  - Required fields present
  - Subject codes unique
  - No duplicate entries in file

**Inputs:**
- CSV/XLSX file with subject data

**Outputs:**
- Success count (e.g., "45 subjects created")
- Error list if any (e.g., "Row 3: Duplicate subject code")

**Business Rules:**
- BR-16: Subject code must be unique
- BR-17: Duplicate codes skipped with warning

**Related Use Cases:** UC002 (Create academic structure)

---

### **FE-09: Manage Subjects**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-09 |
| **Name** | Manage Subjects |
| **Priority** | MUST |
| **User Role** | Staff |

**Description:**  
Staff thực hiện CRUD operations cho môn học (Create, Read, Update, Delete).

**Functional Details:**
- **Create Subject:**
  - Form: Subject code, name, description
  - Validation: Code unique, name required
- **View Subjects:**
  - List with search and filter
  - Display: Code, name, created date
- **Edit Subject:**
  - Update name, description (code immutable after creation)
- **Delete Subject:**
  - Soft delete (mark as inactive)
  - Cannot delete if linked to curricula or classes

**Inputs:**
- Subject code (string, 5-10 chars)
- Subject name (string, 10-200 chars)
- Description (text, optional)

**Outputs:**
- Subject created/updated/deleted
- Success/error messages

**Business Rules:**
- BR-18: Subject code immutable after creation
- BR-19: Cannot delete subject linked to active classes

---

### **FE-10 ~ FE-16: Similar Structure**

*Due to character limit, I'll provide brief summaries for FE-10 to FE-16. Detailed specs similar to FE-08/FE-09.*

**FE-10: Import Curricula from File** - Upload file to create curricula linked to subjects  
**FE-11: Manage Curricula** - CRUD for curricula (syllabus, learning outcomes)  
**FE-12: Import Classes from File** - Bulk create classes from CSV/Excel  
**FE-13: Manage Classes** - CRUD for classes (code, name, semester, subject)  
**FE-14: Import Users from File** - Bulk create lecturer and student accounts  
**FE-15: Assign Lecturer to Class** - Link lecturer to class as instructor  
**FE-16: Assign Students to Class** - Enroll students in class

---

## 3.3.5. MODULE D: HEAD OF DEPARTMENT FUNCTIONS

### **FE-17: View All Projects**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-17 |
| **Name** | View All Projects |
| **Priority** | MUST |
| **User Role** | Head of Department |

**Description:**  
Head xem danh sách tất cả dự án trong hệ thống (pending, approved, rejected) từ tất cả giảng viên.

**Functional Details:**
- **Project List:**
  - Columns: Title, Lecturer, Subject, Status, Submitted Date
  - Filter by: Status (Pending/Approved/Rejected), Subject, Lecturer
  - Search by: Title, keywords
- **Status Indicators:**
  - Pending: Yellow badge
  - Approved: Green badge
  - Rejected: Red badge
- **Sorting:**
  - By submitted date (newest first default)
  - By title (A-Z)

**Inputs:**
- Filter criteria
- Search query

**Outputs:**
- Filtered/searched project list

**Business Rules:**
- BR-20: Head sees all projects regardless of lecturer

**Related Use Cases:** UC004 (Submit projects), UC017 (View all projects)

---

### **FE-18: Approve/Reject Projects**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-18 |
| **Name** | Approve/Reject Projects |
| **Priority** | MUST |
| **User Role** | Head of Department |

**Description:**  
Head phê duyệt hoặc từ chối dự án đang chờ, kèm lý do nếu reject.

**Functional Details:**
- **Approve Flow:**
  1. Head opens project details
  2. Head reviews title, description, objectives, milestones
  3. Head clicks "Approve" button
  4. System updates status to "Approved"
  5. System notifies lecturer
- **Reject Flow:**
  1. Head opens project details
  2. Head clicks "Reject" button
  3. System shows rejection reason form (required)
  4. Head enters reason (min 20 chars)
  5. Head confirms rejection
  6. System updates status to "Rejected"
  7. System notifies lecturer with reason

**Inputs:**
- Project ID
- Rejection reason (if rejecting)

**Outputs:**
- Updated project status
- Notification sent to lecturer

**Business Rules:**
- BR-21: Only Pending projects can be approved/rejected
- BR-22: Rejection reason required and visible to lecturer
- BR-23: Approved projects immutable (unless Head updates)

**Related Use Cases:** UC004 (Submit for approval)

---

### **FE-19 ~ FE-21: Brief Summary**

**FE-19: Update Approved Projects** - Head can edit approved projects if needed  
**FE-20: Assign Projects to Classes** - Head assigns approved projects to classes (same as lecturer)  
**FE-21: View All Classes** - Head sees all classes across subjects/lecturers

---

## 3.3.6. MODULE E: LECTURER FUNCTIONS (26 FEATURES)

### Project Management (FE-22 ~ FE-26)

**FE-22: Create Project**
- Form: Title, description, objectives (list), milestones (list)
- AI integration option: Generate milestones from curriculum
- Save as draft or submit for approval
- **Inputs:** Project data (title, description, etc.)
- **Outputs:** New project with status "Pending"
- **Related UC:** UC002

**FE-23: AI Generate Milestones**
- Click "Generate with AI" during project creation
- System sends curriculum + project description to AWS Bedrock
- AI returns suggested milestones (title, description, duration)
- Lecturer can edit before saving
- **Inputs:** Project description, curriculum data
- **Outputs:** AI-generated milestone list
- **Related UC:** UC002

**FE-24: Submit Project for Approval**
- Lecturer submits Pending project to Head
- Validation: All required fields filled
- **Outputs:** Status changed to "Submitted", Head notified
- **Related UC:** UC004

**FE-25: View Own Projects**
- List of lecturer's projects grouped by status
- Filter/search by title, subject, date
- **Related UC:** UC003

**FE-26: Assign Project to Class**
- Select approved project, assign to one of lecturer's classes
- Project appears in class project list
- **Related UC:** UC005

---

### Team Management (FE-27 ~ FE-29)

**FE-27: Create Groups**
- Form: Group name, description
- Select team leader from class students
- Add 2-4 more members (total 3-5)
- **Inputs:** Group name, member IDs
- **Outputs:** New group created
- **Related UC:** UC011

**FE-28: Manage Group Members**
- Add/remove members
- Change team leader
- View member profiles
- **Related UC:** UC012

**FE-29: Assign Project to Group**
- Select group without project
- Choose from class's assigned projects
- System auto-creates group milestones from project milestones
- **Inputs:** Group ID, Project ID
- **Outputs:** Group assigned project, milestones created
- **Related UC:** UC006 (Pick project for team)

---

### Monitoring (FE-30 ~ FE-32)

**FE-30: Track Group Progress**
- View milestone completion percentage
- Timeline view of milestones
- Deadline tracking with alerts
- **Related UC:** UC013

**FE-31: Track Member Contribution**
- Contribution breakdown by member:
  - Tasks completed
  - Checkpoints submitted
  - Chat activity
  - File uploads
- Pie chart or bar chart visualization
- **Related UC:** UC014

**FE-32: AI Progress Analysis**
- AI analyzes group progress data
- Provides recommendations:
  - "Team behind schedule, suggest extending deadline"
  - "Member X has low contribution, consider intervention"
- **Inputs:** Group progress data
- **Outputs:** AI insights and recommendations

---

### Milestone & Checkpoint Management (FE-33 ~ FE-37)

**FE-33: Manage Group Milestones**
- Edit milestone descriptions, deadlines
- Reorder milestones
- Mark as complete (override student)
- **Related UC:** UC015

**FE-34: Create Milestone Questions**
- Add guiding questions to milestones
- Example: "What challenges did you face?" "How did you overcome them?"
- Students answer these questions
- **Related UC:** UC016

**FE-35: View Milestone Answers**
- See student answers to milestone questions
- Provide feedback/grades
- **Related UC:** UC025

**FE-36: View Checkpoint Submissions**
- List of all checkpoint submissions
- Download submitted files
- **Related UC:** UC026

**FE-37: View Group Workspace**
- Read-only view of Kanban board
- See Cards → Tasks → Subtasks
- Add comments to tasks (feedback)
- **Related UC:** UC017

---

### Resources (FE-38 ~ FE-39)

**FE-38: Manage Class Resources**
- Upload files for entire class
- Students can download
- **Related UC:** UC009

**FE-39: Manage Group Resources**
- Upload files specific to a group
- Only group members can access

---

### Evaluation (FE-40 ~ FE-43)

**FE-40: Evaluate Groups**
- At project end, give group grade and feedback
- Grade scale: 0-10 or A-F
- **Related UC:** UC024

**FE-41: Evaluate Members**
- Individual student grades within group
- Contribution-based grading
- **Related UC:** UC024

**FE-42: Evaluate Checkpoints**
- Grade checkpoint submissions
- Provide written feedback
- **Related UC:** UC026

**FE-43: View Peer Reviews**
- See peer evaluations students gave each other
- Use to inform final grading
- **Related UC:** UC027

---

### Communication (FE-44 ~ FE-46)

**FE-44: Chat with Groups**
- Real-time messaging with groups
- Same interface as students
- **Related UC:** UC020

**FE-45: Schedule Meetings**
- Create meeting events for groups
- Send notifications with meeting link
- **Related UC:** UC021

**FE-46: Join Video Meetings**
- Join group video calls
- Screen share, whiteboard access
- **Related UC:** UC021

---

### AI Assistance (FE-47)

**FE-47: Use AI Chatbot**
- Chat with AI for teaching assistance
- Ask: "Suggest evaluation criteria for project X"
- **Related UC:** UC030

---

## 3.3.7. MODULE F: STUDENT FUNCTIONS (16 FEATURES)

### Class & Team Views (FE-48 ~ FE-50)

**FE-48: View Assigned Classes**
- List of enrolled classes
- Class details: Lecturer, subject, schedule
- **Related UC:** UC033

**FE-49: View Group Details**
- Team name, members, assigned project
- Member roles (leader vs member)
- **Related UC:** UC033

**FE-50: View Group Progress**
- Milestone timeline
- Team contribution chart
- **Related UC:** UC013

---

### Milestone & Checkpoint Management (FE-51 ~ FE-55)

**FE-51: Mark Milestones Complete**
- Team leader marks milestone as done
- Requires all checkpoints completed
- **Related UC:** UC036

**FE-52: Answer Milestone Questions**
- Answer questions posted by lecturer
- Text response + file upload
- **Related UC:** UC040

**FE-53: Create Checkpoints**
- Team leader creates checkpoints within milestone
- Assign to specific members
- **Related UC:** UC037

**FE-54: Submit Checkpoints**
- Assigned member submits work for checkpoint
- Text + file upload
- **Related UC:** UC038

**FE-55: Mark Checkpoints Complete**
- Member marks own checkpoint as done
- **Related UC:** UC018

---

### Task Management (FE-56 ~ FE-58)

**FE-56: Manage Tasks**
- Create/edit/delete tasks in Kanban board
- 3-level hierarchy: Card → Task → Subtask
- **Related UC:** UC039

**FE-57: Assign Tasks**
- Assign tasks to team members
- Due date optional
- **Related UC:** UC039

**FE-58: Update Task Status**
- Drag-drop tasks between columns
- To Do → In Progress → Done
- **Related UC:** UC039

---

### Resources (FE-59)

**FE-59: View/Upload Group Resources**
- Download class resources
- Upload team resources
- **Related UC:** UC029

---

### Evaluation (FE-60 ~ FE-62)

**FE-60: Peer Review**
- Rate and comment on teammates
- Done at project end
- **Related UC:** UC041

**FE-61: Review Milestone Answers**
- Peer review of teammates' milestone answers
- **Related UC:** UC025

**FE-62: View Evaluations**
- See grades and feedback from lecturer
- See aggregated peer feedback
- **Related UC:** UC042

---

### AI Assistance (FE-63)

**FE-63: Use AI Chatbot**
- Ask AI for help: "Brainstorm ideas for feature X"
- **Related UC:** UC030

---

## 3.3.8. MODULE G: REAL-TIME COLLABORATION (6 FEATURES)

### **FE-64: Real-time Chat**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-64 |
| **Name** | Real-time Chat |
| **Priority** | MUST |
| **User Role** | Lecturer, Student |

**Description:**  
Gửi/nhận tin nhắn text trong nhóm qua WebSocket với persistence.

**Functional Details:**
- **Chat Interface:**
  - Message list (scrollable, last 50 messages initially)
  - Text input box with send button
  - Typing indicators ("User X is typing...")
  - Read receipts (message seen by members)
- **Message Features:**
  - Plain text messages
  - File attachments (max 10MB)
  - @mention to notify specific user
  - Message history searchable
- **Real-time Sync:**
  - WebSocket broadcasts messages instantly
  - Offline messages delivered when user comes online
  - Message persistence in database

**Inputs:**
- Message text (string, max 2000 chars)
- Optional: File attachment

**Outputs:**
- Message delivered to all team members
- Real-time UI update

**Business Rules:**
- BR-24: Messages cannot be edited after 5 minutes
- BR-25: Only sender can delete their own messages
- BR-26: Chat history retained for 1 year

**Related Use Cases:** UC020

---

### **FE-65 ~ FE-69: Brief Summary**

**FE-65: Video Conferencing**
- WebRTC peer-to-peer video/audio calls
- Up to 20 participants
- **Related UC:** UC021

**FE-66: Screen Sharing**
- Share entire screen or application window
- During video call
- **Related UC:** UC021

**FE-67: Interactive Whiteboard**
- Shared canvas for drawing/brainstorming
- Real-time sync via WebSocket
- Tools: Pen, shapes, text, eraser
- **Related UC:** UC022

**FE-68: Collaborative Text Editor**
- Google Docs-like editor
- Multiple cursors visible
- Operational Transform for conflict resolution
- **Related UC:** UC022

**FE-69: Meeting Scheduling**
- Create future meetings with date/time
- Send calendar invitations
- Reminder notifications
- **Related UC:** UC021

---

## 3.3.9. MODULE H: NOTIFICATION SYSTEM (3 FEATURES)

### **FE-70: Email Notifications**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-70 |
| **Name** | Email Notifications |
| **Priority** | MUST |
| **User Role** | All |

**Description:**  
Hệ thống gửi email thông báo cho các sự kiện quan trọng.

**Functional Details:**
- **Email Triggers:**
  - Project approved/rejected (to lecturer)
  - Project assigned to class (to students)
  - Checkpoint submitted (to lecturer and team leader)
  - Evaluation received (to student)
  - Meeting scheduled (to participants)
  - Deadline approaching (to team members)
- **Email Content:**
  - Subject line with event summary
  - Body with details and link to system
  - Footer with unsubscribe option
- **Email Service:**
  - SMTP service (Gmail, SendGrid, etc.)
  - Queue-based delivery (async)
  - Retry mechanism for failures

**Inputs:**
- Event type and data
- Recipient email address(es)

**Outputs:**
- Email sent to recipient(s)
- Delivery status logged

**Business Rules:**
- BR-27: User can opt-out of certain email types
- BR-28: Critical emails (evaluations) cannot be disabled
- BR-29: Email delivery retried up to 3 times

**Related Use Cases:** UC031

---

### **FE-71: Real-time Notifications**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-71 |
| **Name** | Real-time Notifications |
| **Priority** | MUST |
| **User Role** | All |

**Description:**  
Thông báo trong ứng dụng (toast popup, bell icon) qua WebSocket.

**Functional Details:**
- **Notification Bell:**
  - Bell icon in header with unread count badge
  - Click to open notification dropdown
  - List of recent notifications (last 20)
- **Toast Notifications:**
  - Popup in bottom-right corner for new events
  - Auto-dismiss after 5 seconds
  - Click to navigate to related page
- **Notification Types:**
  - Same triggers as email (FE-70)
  - Plus: New chat message, @mention
- **Real-time Delivery:**
  - WebSocket pushes notification to connected users
  - Offline users see notifications when they log in

**Inputs:**
- Event type and data
- User ID(s) to notify

**Outputs:**
- Real-time notification displayed
- Notification record in database

**Business Rules:**
- BR-30: Notifications expire after 30 days
- BR-31: User can mark all as read

**Related Use Cases:** UC031

---

### **FE-72: Notification History**

| **Attribute** | **Details** |
|---------------|-------------|
| **Feature ID** | FE-72 |
| **Name** | Notification History |
| **Priority** | SHOULD |
| **User Role** | All |

**Description:**  
Xem lịch sử thông báo, mark as read, filter by type.

**Functional Details:**
- **Notification List:**
  - Paginated list (20 per page)
  - Columns: Type icon, Message, Time, Read status
  - Click to navigate to related page
- **Filtering:**
  - By type: All, Projects, Teams, Evaluations, Meetings, etc.
  - By status: All, Unread, Read
  - By date: Today, This Week, This Month
- **Actions:**
  - Mark as read/unread
  - Mark all as read
  - Delete notification

**Inputs:**
- Filter criteria
- Page number

**Outputs:**
- Filtered notification list

**Business Rules:**
- BR-32: Notifications auto-delete after 30 days

**Related Use Cases:** UC031

---

## 3.3.10. Feature Priority Summary

| Priority | Count | Features |
|----------|-------|----------|
| **MUST** | 52 | Critical for MVP (authentication, core workflows) |
| **SHOULD** | 15 | Important but can be deferred |
| **COULD** | 5 | Nice to have (AI features, advanced analytics) |

**MUST Features:** FE-01, FE-02, FE-03, FE-05, FE-08, FE-09, FE-13, FE-17, FE-18, FE-22, FE-24, FE-25, FE-27, FE-29, FE-30, FE-33, FE-40, FE-41, FE-42, FE-48, FE-49, FE-51, FE-53, FE-54, FE-56, FE-64, FE-65, FE-70, FE-71

**SHOULD Features:** FE-04, FE-06, FE-07, FE-11, FE-15, FE-23, FE-32, FE-34, FE-39, FE-43, FE-52, FE-60, FE-67, FE-68, FE-72

**COULD Features:** FE-23 (AI milestones), FE-32 (AI progress), FE-47 (AI chatbot), FE-63 (AI chatbot for students)

---

## 3.3.11. Feature Dependencies

### Critical Path Dependencies

```
FE-01 (Auth) 
  ↓
FE-02 (RBAC) → All other features
  ↓
FE-08/09 (Subjects) → FE-13 (Classes) → FE-15/16 (Assign users to classes)
  ↓
FE-22 (Create Project) → FE-24 (Submit) → FE-18 (Approve) → FE-26 (Assign to class)
  ↓
FE-27 (Create Groups) → FE-29 (Assign project to group)
  ↓
FE-56 (Tasks), FE-53 (Checkpoints) → Student work
  ↓
FE-40/41/42 (Evaluations) → Project completion
```

### Feature Integration Map

- **FE-64 (Chat)** integrates with all team-related features
- **FE-70/71 (Notifications)** triggered by most features
- **FE-23/32/47/63 (AI)** optional enhancements to core features

---

## 3.3.12. Functional Requirements Traceability

Complete mapping to Use Cases:

| Feature Range | Use Cases | Module |
|---------------|-----------|--------|
| FE-01 ~ FE-04 | All (Auth required) | Authentication |
| FE-05 ~ FE-07 | Admin-specific | Administration |
| FE-08 ~ FE-16 | Staff workflows | Academic Management |
| FE-17 ~ FE-21 | UC004, UC005, UC017, UC018 | Head Functions |
| FE-22 ~ FE-47 | UC001-UC009, UC011-UC018, UC024-UC027 | Lecturer Functions |
| FE-48 ~ FE-63 | UC010, UC013-UC014, UC032-UC042 | Student Functions |
| FE-64 ~ FE-69 | UC019-UC022 | Collaboration |
| FE-70 ~ FE-72 | UC031 | Notifications |

Detailed traceability matrix available in [3.5 Requirement Appendix](3.5-RequirementAppendix.md).

---

**[← Back to Master SRS](../03-SRS.md)** | **[Next: 3.4 Non-Functional Requirements →](3.4-NonFunctionalRequirements.md)**

@startuml 4.3.20-activity-project-approval
!theme plain

skinparam backgroundColor #FFFFFF
skinparam activity {
    BackgroundColor #F5F5F5
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
    FontName Arial
}
skinparam ArrowColor #424242

title <b>Project Approval Workflow - Activity Diagram</b>\n<size:10>UML 2.5 Activity Diagram</size>

partition Lecturer {
  start
  :Create project;
  :Fill details;
  note right: Title, Description, Objectives
  
  if (Use AI?) then ([yes])
    partition System {
      :Generate milestones;
    }
    :Review & adjust;
  else ([no])
    :Manual entry;
  endif
  
  :Validate form;
  
  if (Complete?) then ([no])
    :Show errors;
    stop
  endif
  
  :Submit;
}

partition System {
  :Update status;
  :Project
  [status=PENDING]];
  :Notify Head;
}

partition "Department Head" {
  :Review project;
  
  fork
    :Check curriculum;
  fork again
    :Evaluate scope;
  fork again
    :Review milestones;
  end fork
  
  :Analyze;
  
  if (Approve?) then ([yes])
    
    if (Needs revision?) then ([yes])
      :Request changes;
      partition System {
        :Notify lecturer;
      }
      partition Lecturer {
        :Make revisions;
        :Resubmit;
      }
      detach
    endif
    
    :Approve;
    
    partition System {
      :Update status;
      :Project
      [status=APPROVED]];
      
      fork
        :Notify lecturer;
      fork again
        :Add to pool;
      end fork
    }
    
    partition Lecturer {
      if (Assign class?) then ([yes])
        :Select class;
        partition System {
          :Project
          [status=ACTIVE]];
        }
        stop
      else ([no])
        :Keep in pool;
        stop
      endif
    }
    
  else ([no])
    :Reject;
    
    partition System {
      :Project
      [status=REJECTED]];
      :Notify lecturer;
    }
    
    partition Lecturer {
      if (Revise?) then ([yes])
        :Create new version;
        detach
      else ([no])
        :Archive;
        stop
      endif
    }
  endif
}

legend right
  <b>UML 2.5 Notation</b>
  ──────────────────
  • Diamond: decision/merge
  • Black bar: fork/join
  • [Object]: object node
  • |Actor|: swimlane
  • [guard]: condition
end legend

@enduml

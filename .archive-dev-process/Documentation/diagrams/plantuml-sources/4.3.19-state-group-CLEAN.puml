@startuml 4.3.19-state-group
!theme plain

skinparam backgroundColor #FFFFFF
skinparam state {
    BackgroundColor #F5F5F5
    BorderColor #1976D2
    BorderThickness 2
    FontSize 11
    FontName Arial
}
skinparam ArrowColor #424242

title <b>Group Lifecycle - State Machine</b>\n<size:10>UML 2.5 State Diagram</size>

[*] --> Forming

state Forming {
  Forming : entry / generateGroupID()
  
  [*] --> InvitingMembers
  
  state InvitingMembers {
    InvitingMembers : do / sendInvitations()
  }
  
  state WaitingResponses {
    WaitingResponses : do / trackResponses()
  }
  
  InvitingMembers --> WaitingResponses : invite() [sent]
  WaitingResponses --> InvitingMembers : inviteMore() [count < 5]
}

Forming --> formChoice
formChoice --> PendingApproval : submit() [membersValid] / notifyLecturer()
formChoice --> Disbanded : timeout() [deadline2weeks]

state PendingApproval {
  PendingApproval : entry / notifyLecturer()
}

PendingApproval --> approvalChoice
approvalChoice --> Active : approve() [valid] / initWorkspace()
approvalChoice --> Forming : reject() [invalid] / notifyLeader()

state Active {
  Active : entry / enableCollabTools()
  
  [*] --> NoProject
  
  state NoProject {
    NoProject : do / browseProjects()
  }
  
  state ProjectSelected {
    ProjectSelected : entry / assignProject()
  }
  
  state WorkingOnCheckpoints {
    WorkingOnCheckpoints : do / collaborate()
  }
  
  NoProject --> ProjectSelected : selectProject() [approved]
  ProjectSelected --> WorkingOnCheckpoints : startWork()
}

Active --> activeChoice
activeChoice --> OnHold : pause() [emergency] / freeze()
activeChoice --> Completed : finish() [semesterEnd] / lockWork()

state OnHold {
  OnHold : entry / freezeActivities()
}

OnHold --> holdChoice
holdChoice --> Active : resume() [resolved]
holdChoice --> Disbanded : terminate() [cannotContinue]

state Completed {
  Completed : entry / calculateGrades()
}

Completed --> Evaluated : evaluate() / runPeerReview()

state Evaluated {
  Evaluated : entry / finalizeGrades()
}

Evaluated --> Archived : / archive()

state Disbanded {
  Disbanded : entry / redistributeMembers()
}

Disbanded --> Archived : / cleanup()

state Archived {
  Archived : Read-only, 3 years retention
}

Archived --> [*] : delete() [after(3.years)]

note right of Forming
  <b>Constraints:</b>
  • 3-5 members required
  • Deadline: 2 weeks
end note

note right of Active
  <b>Tools enabled:</b>
  • Chat, Video, Whiteboard
  • File sharing, Tasks
end note

legend right
  <b>UML 2.5 Notation</b>
  ──────────────────
  • Diamond: choice node
  • Composite state:
    contains substates
  • Transition format:
    <i>event [guard] / action</i>
end legend

@enduml
